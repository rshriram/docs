<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Amalgam8 Registry | Amalgam8 Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../content/amalgam8-components-sidecar.html" />
    
    
    <link rel="prev" href="../content/amalgam8-architecture.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="2.1" data-chapter-title="Amalgam8 Registry" data-filepath="content/amalgam8-components-registry.md" data-basepath=".." data-revision="Wed Jul 06 2016 22:53:04 GMT-0400 (EDT)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="content/what-is-amalgam8.html">
            
                
                    <a href="../content/what-is-amalgam8.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        What is Amalgam8
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="content/amalgam8-architecture.html">
            
                
                    <a href="../content/amalgam8-architecture.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Amalgam8 Architecture
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="content/amalgam8-components-registry.html">
            
                
                    <a href="../content/amalgam8-components-registry.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Amalgam8 Registry
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="content/amalgam8-components-registry.html">
            
            <span><b>2.1.1.</b> Interoperability</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1.1" data-path="content/amalgam8-components-registry.html">
            
            <span><b>2.1.1.1.</b> Kubernetes-Registry Adapter</span>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="content/amalgam8-components-sidecar.html">
            
                
                    <a href="../content/amalgam8-components-sidecar.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Amalgam8 Sidecar
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="content/amalgam8-components-sidecar.html">
            
            <span><b>2.2.1.</b> Deployment Options</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="content/amalgam8-components-sidecar.html">
            
            <span><b>2.2.2.</b> Configuration Options</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="content/amalgam8-components-sidecar.html">
            
            <span><b>2.2.3.</b> Programmable Proxy</span>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Amalgam8 Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="amalgam8-registry">Amalgam8 Registry</h2>
<p>To integrate and use a microservice in Amalgam8, it needs to be registered
in the Amalgam8 Registry.  The most basic way of registering, which can be
used for microservices running on any platform / runtime, is shown in the
following diagram:</p>
<p><img src="figures/amalgam8-service-registration.svg" alt="basic registration"></p>
<p>The Amalgam8 sidecar is used to register and continuously send heartbeats
to the registry on behalf of a microservice instance. In addition, the
sidecar keeps track of the health of the application (microservice A in the
figure above) and stops sending heartbeats if or when it terminates, soon
after which the registration in the Amalgam8 Registry will expire and be
removed.  Note that if the sidecar is unable to send heartbeats to the
Registry for some reason (say network disruption), the service&apos;s entry in
the Registry might expire, causing the instance information to be removed
from the Registry. In other words, the instance will become unavailable to
other microservices. When the sidecar re-establishes connectivity with the
Registry, it re-registers the service.  This is a common service
registration design pattern used in many microservice frameworks, and will
work for services running anywhere.</p>
<h3 id="interoperability-with-other-service-registries-">Interoperability with other service registries <a id="interoperability"></a></h3>
<p>A key design feature of Amalgam8 Registry is to leverage features of any
particular runtime platform that a microservice may be deployed in.  The
Registry supports the concept of adapters -- pluggable modules that can be
used to populate the Registry with information from other sources instead
of the sidecar, such as Etcd, Consul, Kubernetes&apos; internal registry,
etc. Currently, the Registry provides an adapter for Kubernetes, and can be
used as a drop-in replacement for Netflix Eureka, with the added feature of
multi-tenancy.</p>
<h4 id="kubernetesregistry-adapter-">Kubernetes-Registry Adapter <a id="k8s-adapter"></a></h4>
<p>A microservice running in Kubernetes with a corresponding service
definition, will already have the endpoints (instances) being tracked by
the Kubernetes runtime (kubelet) and reflected in the Kubernetes service
registry. Instead of using the sidecar to explicitly registering this
service once again in the Registry, Amalgam8 provides a Kubernetes
adapter. The adapter can be configured to watch the Kubernetes registry and
automatically mirror the endpoints in Amalgam8 as shown in the figure
below.</p>
<p><img src="figures/amalgam8-registry-k8s-adapter.svg" alt="k8s adapter"></p>
<p>In the above figure, service B is a Kubernetes service defined in
serviceB.yaml. There is nothing that needs to be added or changed to
integrate it with an Amalgam8 system. Instances, as they come and go, will
be maintained in the Kubernetes registry by the Kubernetes runtime, and
then automatically mirrored in the Amalgam8 Registry by the
kubernetes-adapter.</p>
<p>Similar adapter plugins can be added to support other runtime environments
where service registration is automatically managed by the container
platform.  For example, a Docker environment with
<a href="http://weaveworks.github.io/flux/" target="_blank">Weave Flux</a> allows services to be
defined using the fluxctl command, the endpoints of which are then
automatically tracked and reflected in its Etcd registry. Integration with
Amalgam8&apos;s Registry could be done in a manner similar to the Kubernetes
adapter.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../content/amalgam8-architecture.html" class="navigation navigation-prev " aria-label="Previous page: Amalgam8 Architecture"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../content/amalgam8-components-sidecar.html" class="navigation navigation-next " aria-label="Next page: Amalgam8 Sidecar"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
