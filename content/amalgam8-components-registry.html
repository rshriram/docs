
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Amalgam8 Registry Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="amalgam8-components-registry.html" />
    
    
    <link rel="prev" href="amalgam8-architecture.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="what-is-amalgam8.html">
            
                <a href="what-is-amalgam8.html">
            
                    
                    What is Amalgam8
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="getting-started-with-amalgam8.html">
            
                <a href="getting-started-with-amalgam8.html">
            
                    
                    Getting Started with Amalgam8
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="amalgam8-architecture.html">
            
                <a href="amalgam8-architecture.html">
            
                    
                    Amalgam8 Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="amalgam8-components-registry.html">
            
                <a href="amalgam8-components-registry.html#registry-root">
            
                    
                    Amalgam8 Registry
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="amalgam8-components-registry.html">
            
                <a href="amalgam8-components-registry.html#interoperability">
            
                    
                    Interoperability
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1.1" data-path="amalgam8-components-registry.html">
            
                <a href="amalgam8-components-registry.html#k8s_adapter">
            
                    
                    Kubernetes-Registry Adapter
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="amalgam8-components-sidecar.html">
            
                <a href="amalgam8-components-sidecar.html#sidecar-root">
            
                    
                    Amalgam8 Sidecar
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="amalgam8-components-sidecar.html">
            
                <a href="amalgam8-components-sidecar.html#deployment_options">
            
                    
                    Deployment Options
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="amalgam8-components-sidecar.html">
            
                <a href="amalgam8-components-sidecar.html#configuration_options">
            
                    
                    Configuration Options
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="amalgam8-components-sidecar.html">
            
                <a href="amalgam8-components-sidecar.html#programmable_proxy">
            
                    
                    Programmable Proxy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Amalgam8 Registry</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="amalgam8-registry-">Amalgam8 Registry <a id="registry-root"></a></h2><p>To integrate and use a microservice in Amalgam8, it needs to be registered
in the Amalgam8 Registry.  The most basic way of registering, which can be
used for microservices running on any platform / runtime, is shown in the
following diagram:</p><p><img alt="basic registration" src="figures/amalgam8-service-registration.svg"></p><p>The Amalgam8 sidecar is used to register and continuously send heartbeats
to the registry on behalf of a microservice instance. In addition, the
sidecar keeps track of the health of the application (microservice A in the
figure above) and stops sending heartbeats if or when it terminates, soon
after which the registration in the Amalgam8 Registry will expire and be
removed.  Note that if the sidecar is unable to send heartbeats to the
Registry for some reason (say network disruption), the service&apos;s entry in
the Registry might expire, causing the instance information to be removed
from the Registry. In other words, the instance will become unavailable to
other microservices. When the sidecar re-establishes connectivity with the
Registry, it re-registers the service.  This is a common service
registration design pattern used in many microservice frameworks, and will
work for services running anywhere.</p><h3 id="interoperability-with-other-service-registries-">Interoperability with other service registries <a id="interoperability"></a></h3><p>A key design feature of Amalgam8 Registry is to leverage features of any
particular runtime platform that a microservice may be deployed in.  The
Registry supports the concept of adapters -- pluggable modules that can be
used to populate the Registry with information from other sources instead
of the sidecar, such as Etcd, Consul, Kubernetes&apos; internal registry,
etc. Currently, the Registry provides an adapter for Kubernetes, and can be
used as a drop-in replacement for Netflix Eureka, with the added feature of
multi-tenancy.</p><h4 id="kubernetes-registry-adapter-">Kubernetes-Registry Adapter <a id="k8s_adapter"></a></h4><p>A microservice running in Kubernetes with a corresponding service
definition, will already have the endpoints (instances) being tracked by
the Kubernetes runtime (kubelet) and reflected in the Kubernetes service
registry. Instead of using the sidecar to explicitly registering this
service once again in the Registry, Amalgam8 provides a Kubernetes
adapter. The adapter can be configured to watch the Kubernetes registry and
automatically mirror the endpoints in Amalgam8 as shown in the figure
below.</p><p><img alt="k8s adapter" src="figures/amalgam8-registry-k8s-adapter.svg"></p><p>In the above figure, service B is a Kubernetes service defined in
serviceB.yaml. There is nothing that needs to be added or changed to
integrate it with an Amalgam8 system. Instances, as they come and go, will
be maintained in the Kubernetes registry by the Kubernetes runtime, and
then automatically mirrored in the Amalgam8 Registry by the
kubernetes-adapter.</p><p>Similar adapter plugins can be added to support other runtime environments
where service registration is automatically managed by the container
platform.  For example, a Docker environment with
<a href="http://weaveworks.github.io/flux/" target="_blank">Weave Flux</a> allows services to be
defined using the fluxctl command, the endpoints of which are then
automatically tracked and reflected in its Etcd registry. Integration with
Amalgam8&apos;s Registry could be done in a manner similar to the Kubernetes
adapter.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="amalgam8-architecture.html" class="navigation navigation-prev " aria-label="Previous page: Amalgam8 Architecture">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="amalgam8-components-registry.html#interoperability" class="navigation navigation-next " aria-label="Next page: Interoperability">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Amalgam8 Registry","level":"1.4.1","depth":2,"next":{"title":"Interoperability","level":"1.4.1.1","depth":3,"anchor":"#interoperability","path":"content/amalgam8-components-registry.md","ref":"content/amalgam8-components-registry.md#interoperability","articles":[{"title":"Kubernetes-Registry Adapter","level":"1.4.1.1.1","depth":4,"anchor":"#k8s_adapter","path":"content/amalgam8-components-registry.md","ref":"content/amalgam8-components-registry.md#k8s_adapter","articles":[]}]},"previous":{"title":"Amalgam8 Architecture","level":"1.4","depth":1,"path":"content/amalgam8-architecture.md","ref":"content/amalgam8-architecture.md","articles":[{"title":"Amalgam8 Registry","level":"1.4.1","depth":2,"anchor":"#registry-root","path":"content/amalgam8-components-registry.md","ref":"content/amalgam8-components-registry.md#registry-root","articles":[{"title":"Interoperability","level":"1.4.1.1","depth":3,"anchor":"#interoperability","path":"content/amalgam8-components-registry.md","ref":"content/amalgam8-components-registry.md#interoperability","articles":[{"title":"Kubernetes-Registry Adapter","level":"1.4.1.1.1","depth":4,"anchor":"#k8s_adapter","path":"content/amalgam8-components-registry.md","ref":"content/amalgam8-components-registry.md#k8s_adapter","articles":[]}]}]},{"title":"Amalgam8 Sidecar","level":"1.4.2","depth":2,"anchor":"#sidecar-root","path":"content/amalgam8-components-sidecar.md","ref":"content/amalgam8-components-sidecar.md#sidecar-root","articles":[{"title":"Deployment Options","level":"1.4.2.1","depth":3,"anchor":"#deployment_options","path":"content/amalgam8-components-sidecar.md","ref":"content/amalgam8-components-sidecar.md#deployment_options","articles":[]},{"title":"Configuration Options","level":"1.4.2.2","depth":3,"anchor":"#configuration_options","path":"content/amalgam8-components-sidecar.md","ref":"content/amalgam8-components-sidecar.md#configuration_options","articles":[]},{"title":"Programmable Proxy","level":"1.4.2.3","depth":3,"anchor":"#programmable_proxy","path":"content/amalgam8-components-sidecar.md","ref":"content/amalgam8-components-sidecar.md#programmable_proxy","articles":[]}]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"content/amalgam8-components-registry.md","mtime":"2016-07-12T02:47:31.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-07-25T23:47:56.810Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

